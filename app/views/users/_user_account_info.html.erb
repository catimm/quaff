<div class="row no-margin">
	<div class="col-xs-12 col-sm-8">
		<h3 class="recent-ratings-header">My user and delivery info</h3>
	</div>
	<div class="col-xs-12 col-sm-4 no-padding-right text-right" id="last-updated-holder">
		<% if !@preference_updated.nil? %>
			<%= render 'preferences_last_updated' %>
		<% end %>
	</div>
</div>
<div class="row no-margin">
	<div class="col-xs-12 col-sm-5">
		<%= form_for @user, remote: true do |f| %>
			<div class="col-xs-4 col-sm-2 no-padding">
				<%= label :first_name, 'First name' %>
			</div>
			<div class="col-xs-8 col-sm-10 no-padding-right">
				<%= f.text_field :first_name, :class => "form-control user-info-field", placeholder: "First name" %>
			</div>
			<div class="col-xs-4 col-sm-2 no-padding">
				<%= label :last_name, 'Last name' %>
			</div>
			<div class="col-xs-8 col-sm-10 no-padding-right">
				<%= f.text_field :last_name, :class => "form-control user-info-field", placeholder: "Last name" %>
			</div>
			<div class="col-xs-4 col-sm-2 no-padding">
				<%= label :username, 'Username' %>
			</div>
			<div class="col-xs-8 col-sm-10 no-padding-right">
				<%= f.text_field :username, :class => "form-control user-info-field", placeholder: "Username" %>
			</div>
			<div class="col-xs-4 col-sm-2 no-padding">
				<%= label :email, 'Email' %>
			</div>
			<div class="col-xs-8 col-sm-10 no-padding-right">
				<%= f.text_field :email, :class => "form-control user-info-field", placeholder: "Email" %>
			</div>
		<% end %>
		<%- flash.each do |name, msg| -%>
			<% if name == "success" || name == "failure" %>
				<%= content_tag :div, msg, :id => "flash_#{name}" if msg.is_a?(String) %>
			<% end %>
		<%- end -%>
		<div class="col-xs-12 no-padding-left">
			<%= link_to "change password", "#", class: 'btn btn-default btn-danger changeButton change-password show', id: 'change-password-button' %>
			<%= link_to "nevermind", "#", class: 'btn btn-default btn-danger changeButton change-password-nevermind hidden' %>
		</div>
		<div class="password-change-form hidden">
			<%= form_for(@user, :url => { :action => "update_password" } ) do |f| %>
				<%= f.password_field :current_password, :class => "form-control", placeholder: "Current password" %>
				<%= f.password_field :password, :class => "form-control", placeholder: "New password" %>
				<%= f.password_field :password_confirmation, :class => "form-control", placeholder: "Confirm new password" %>
				<%= f.submit "Change password", class: "btn btn-default btn-success formButton" %>	
			<% end %>
		</div>
	</div>
	<div class="col-xs-12 col-sm-5">
			<%= form_for(@user, remote: true ) do |f| %>
				<%= f.fields_for :user_delivery_addresses, @delivery_address do |address| %>
					<div class="col-xs-4 col-sm-2 no-padding">
						<%= label :address_one, 'Address 1' %>
					</div>
					<div class="col-xs-8 col-sm-10 no-padding-right">
						<%= address.text_field :address_one, :class => "form-control user-address-field", placeholder: "Delivery Street Address 1" %>
					</div>
					<div class="col-xs-4 col-sm-2 no-padding">
						<%= label :address_two, 'Address 2' %>
					</div>
					<div class="col-xs-8 col-sm-10 no-padding-right">
						<%= address.text_field :address_two, :class => "form-control user-address-field", placeholder: "Delivery Street Address 2 (Apt, Unit, etc.)" %>
					</div>
					<div class="col-xs-4 col-sm-2 no-padding">
						<%= label :city, 'City' %>
					</div>
					<div class="col-xs-8 col-sm-10 no-padding-right">
						<%= address.text_field :city, :class => "form-control user-address-field", placeholder: "Delivery City" %>
					</div>
					<div class="col-xs-4 col-sm-2 no-padding">
						<%= label :state, 'State' %>
					</div>
					<div class="col-xs-8 col-sm-10 no-padding-right">
						<%= address.text_field :state, :class => "form-control user-address-field", placeholder: "Delivery State" %>
					</div>
					<div class="col-xs-4 col-sm-2 no-padding">
						<%= label :zip, 'Zip' %>
					</div>
					<div class="col-xs-8 col-sm-10 no-padding-right">
						<%= address.text_field :zip, :class => "form-control user-address-field", placeholder: "Zip Code" %>
					</div>
					<div class="col-xs-4 col-sm-2 no-padding">
						<%= label :special_instructions, 'Instructions' %>
					</div>
					<div class="col-xs-8 col-sm-10 no-padding-right">
						<%= address.text_area :special_instructions, :class => "form-control user-address-field", placeholder: "Any special instructions for deliveries?" %>
					</div>	
				<% end %>	
			<% end %>
	</div>
	<%#<div class="col-xs-10 col-sm-2 no-padding"> %>
	<%#	<%= link_to user_path(current_user.id), :method => :delete, class: 'btn btn-default btn-danger changeButton delete-acct', data: {confirm: "Delete your account?"} do %>
	<%#		<i class="fa fa-minus"> delete account</i> %>
	<%#	<% end %>
	<%#</div> %>
</div>