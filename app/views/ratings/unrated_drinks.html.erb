<%= render 'layouts/header' %> 
<div class="row no-margin first-row">
	<div class="container first-row-container">
		<div class="col-xs-12">
			<h1 class="section-header">Ratings</h1>
		</div>
		<div class="col-xs-12 col-sm-7">
			<div class="row">
				<div class="col-xs-4">
					<%= link_to "My ratings", recent_user_ratings_path, class: "drink-preference-view-option" %>
				</div>
				<div class="col-xs-4">
					<%= link_to "Other's ratings", recent_friend_ratings_path, class: "drink-preference-view-option" %>
				</div>
				<div class="col-xs-4">
					<%= link_to "Unrated drinks", unrated_drinks_path, class: "drink-preference-view-option current" %>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="row">
	<div class="container" id="deliveries-view">
		<div class="row no-margin">
			<div class="col-xs-5 col-sm-3 no-padding-right">
				<h3 class="recent-ratings-header">My deliveries</h3>
			</div>
		</div>
		<% @delivery_history_array.each_with_index do |delivery, index| %>	
				<% if index == 0 %>
					<% @row_visibility = "show" %>
					<% @show_more_sign = "hidden" %>
					<% @show_less_sign = "show" %>
				<% else %>
					<% @row_visibility = "hidden" %>
					<% @show_more_sign = "show" %>
					<% @show_less_sign = "hidden" %>
				<% end %>
				<div class="row no-margin">
					<div class="row no-margin" id="delivery-first-row-<%= delivery[0].id %>">	
						<div class="col-xs-12 col-sm-5 col-md-5 no-padding-right" id="delivery-toggle-holder-<%= delivery[0].id %>">
							<div class="delivery-drinks-show-more <%= @show_more_sign %>" id="delivery-drinks-more-<%= delivery[0].id %>">
								<i class="fa fa-plus-square-o fa-2x" aria-hidden="true" data-toggle="tooltip" title="Show more"></i>
							</div>
							<div class="delivery-drinks-show-less <%= @show_less_sign %>" id="delivery-drinks-less-<%= delivery[0].id %>">
								<i class="fa fa-minus-square-o fa-2x" aria-hidden="true" data-toggle="tooltip" title="Show less"></i>
							</div>
							<h4 class="delivered-on-date visible-xs visible-sm hidden-md hidden-lg hidden-xl"><%= (delivery[0].delivery_date).strftime("%a, %b %-d %Y") %></h4>
							<h4 class="delivered-on-date hidden-xs hidden-sm visible-md visible-lg visible-xl"><%= (delivery[0].delivery_date).strftime("%A, %B %-d %Y") %></h4>
						</div>
					</div>
					<div class="row no-margin delivery-second-row <%= @row_visibility %>" id="delivery-second-row-<%= delivery[0].id %>">
						<% delivery[1].each do |drink| %>
							<%= render(partial: 'ratings/drink_card_delivered', locals: { drink: drink }) %>
						<% end %>
					</div>
				</div>
				<hr>
		<% end %>
	</div>
</div>
<%= render 'layouts/footer' %>