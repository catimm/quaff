$(function() {
	// for rating slider
	$("#rater").slider({
		tooltip: 'hide'
	});
	$("#rater").on("slide", function(slideEvt) {
		$("#visible-rating h1").text(slideEvt.value);
	});
	$("#rater").on("change", function() {
		var this_value = $(this).val();
		$("#visible-rating h1").html(this_value);
	});
	// to grab list of descriptors for this beer
	$('#user_beer_rating_beer_attributes_descriptor_list_tokens').tokenInput('/beers/descriptors.json', {
		theme: 'facebook',
		placeholder: 'Choose from list or add your own (separate w/comma)',
		minChars: 2,
	    allowFreeTagging: true,
	    preventDuplicates: true,
	    hintText: 'Type beer descriptor (e.g. citrusy, piney, etc.)'
	});
	// to add already used descriptor to this user's list of descriptors
	$('.token-input-list-facebook_rating li').on('click', function(){
		$(this).addClass("hide");
		var descriptor = $(this).children('p').html();
		$('#user_beer_rating_beer_attributes_descriptor_list_tokens').tokenInput("add", {id: descriptor, name: descriptor});
		return false;
	});
	
	// get width of token input field
	var token_field_width = $("#user_beer_rating_beer_attributes_descriptor_list_tokens").width();
	// set note field to match width of token input field
	$(".rating-notes-container").width(token_field_width - 28);
	
	// show rest of top descriptors
	$(document).on('click', '#show-more-descriptors', function () {
		$(this).parent('.show-more-descriptors').siblings('.token-input-list-facebook_rating.rating-page-descriptor-list-holder').children('.token-input-token-facebook_rating').removeClass('hidden').addClass('show');
		$(this).parent('.show-more-descriptors').removeClass("show").addClass("hidden");
	});
});